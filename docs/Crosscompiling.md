# Crosscompiling (Android and iOS)

## The CMAKE_TOOLCHAIN_FILE way

That's the common way of crosscompiling with CMake. You need a toolchain file which describes your target platform.

In Android, a Gradle-driven project provides the toolchain for you. You don't even need to specify CMAKE_TOOLCHAIN_FILE, 
 Gradle does it for you.

In iOS, there's no "official" toolchain so there are community-provided toolchains
(like the [one used in AUI](https://raw.githubusercontent.com/aui-framework/aui/master/cmake/toolchains/arm64-ios.cmake)).

AUI.Boot forwards `CMAKE_TOOLCHAIN_FILE` across all the dependencies.

## The AUI_BUILD_FOR way

AUI provides the unified way to cross-compile your application with AUI_BUILD_FOR CMake configure variable. When
specified, CMake does the whole configure routine as if the project is compiled for the host system but it generates
extra project directory for the target platform's development environment.

To build target platform's final application package, run build the `apps` target. 

### Example
Assuming working directory is the build directory:

To configure the project use
```
cmake -DAUI_BUILD_FOR=android ..
```

To build the project use
```
cmake --build . -t apps
```


### Supported platforms

| `AUI_BUILD_FOR` value | Target platform | Project environment                        | Project dir                                  |
|-----------------------|-----------------|--------------------------------------------|----------------------------------------------|
| `android`             | Android         | Gradle (can be opened with Android Studio) | `${CMAKE_BINARY_DIR}/app_project` |
| `ios`                 | iOS             | Xcode                                      | `${CMAKE_BINARY_DIR}/app_project`  |


### Limitations

1. Variables defined in the configure step (including the ones specified with command line by `-DVAR=VALUE` syntax) are
   not forwarded to the child CMake configure process. To bypass the limitation, use `auib_mark_var_forwardable(VAR)` 
   function, where `VAR` is your variable name.
2. As like CMake's generated projects, the project generated by AUI are not portable too.